<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ONE TRUE INFOTAINMENT</title>
  <link rel="preload" as="image" href="media/header-banner.png">
  <style>
    :root{
      --site-red:#c62828; --ink:#0a1a3a; --bg:#f4f1ea; --card:#fff8f0; --rail:#ede7df; --gold:#f2b705; --radius:16px;
      --maxw:1280px; --gutter:16px; --shadow:0 4px 14px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--ink);}
    a{color:inherit;text-decoration:none}
    /* Header */
    .site-header{position:sticky;top:0;z-index:50;background:linear-gradient(90deg,#7a0000 0%,#ffffff 50%,#182f8f 100%);border-bottom:6px solid var(--gold)}
    .header-inner{max-width:var(--maxw);margin:auto;padding:10px var(--gutter);display:flex;align-items:center;gap:16px}
    .brand{display:flex;align-items:center;gap:16px}
    .brand img{height:64px}
    .brand-txt{display:flex;flex-direction:column;line-height:1}
    /* Metallic white text treatment */
    .brand-t1,.brand-t2{
      background:linear-gradient(180deg,#ffffff 0%,#e7e7e7 50%,#f8f8f8 65%,#cfcfcf 100%);
      -webkit-background-clip:text;background-clip:text;color:transparent;
      text-shadow:0 1px 0 rgba(255,255,255,.6), 0 2px 6px rgba(0,0,0,.25);
      letter-spacing:.4px
    }
    .brand-t1{font-weight:900;font-size:20px}
    .brand-t2{font-size:13px;opacity:.95}

    /* Layout */
    .wrap{max-width:var(--maxw);margin:16px auto;padding:0 var(--gutter);}
    .layout{display:grid;grid-template-columns:280px 1fr 72px;gap:16px;align-items:start}

    /* Left Ads */
    .ads-col{display:flex;flex-direction:column;gap:16px}
    .ad-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .ad-card img{display:block;width:100%;height:auto}
    .ad-tag{padding:6px 10px;font-size:12px;font-weight:700;color:#3a3a3a;opacity:.8}

    /* Center feed */
    .feed{display:grid;grid-template-columns:1fr;gap:16px}
    .hero{display:grid;grid-template-columns:minmax(320px,640px) 1fr;gap:16px;background:#ffffff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;padding:12px}
    .hero .thumb{border-radius:12px;overflow:hidden}
    .hero .thumb img{width:100%;height:100%;object-fit:cover;aspect-ratio:16/10;display:block}
    .hero .copy{background:linear-gradient(180deg,#fff, #fff9f1);border:1px solid #efe4d6;border-radius:12px;padding:14px}
    .hero h1{margin:4px 0 8px;font-size:26px;line-height:1.15}
    .meta{font-size:12px;opacity:.75;margin-bottom:8px}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;aspect-ratio:16/9;object-fit:cover}
    .card .body{padding:10px 12px}
    .kicker{font-size:11px;font-weight:800;letter-spacing:.28px;color:#1a49a0;margin-bottom:4px;text-transform:uppercase}
    .title{font-size:16px;font-weight:750;line-height:1.2;margin:0 0 6px}

    /* BREAKING pill */
    .pill{position:absolute;top:10px;left:10px;background:var(--site-red);color:white;border-radius:999px;padding:4px 10px;font-size:11px;font-weight:800}
    .media-wrap{position:relative}

    /* Right TAFAJ rail (decorative) */
    .tafaj-rail{background:url('media/tafaj-rail-slice.png') center top/100% 140px repeat-y;border-left:4px solid var(--gold);border-radius:12px;min-height:480px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.06)}

    /* Footer */
    footer{margin:24px auto 48px;max-width:var(--maxw);padding:12px var(--gutter);opacity:.8;font-size:12px}

    /* Responsiveness */
    @media (max-width:1100px){
      .layout{grid-template-columns:240px 1fr 56px}
      .grid{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:820px){ /* Canon: hide rail, alternate ads inline */
      .layout{grid-template-columns:1fr}
      .tafaj-rail{display:none}
      .ads-col{display:none}
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
    }
    @media (max-width:360px){
      .wrap{padding:0 10px}
    }
  </style>
</head>
<body>
  <!-- Header banner links to index.html per canon -->
  <header class="site-header">
    <a class="header-inner brand" href="index.html" aria-label="ONE TRUE INFOTAINMENT home">
      <img src="media/header-banner.png" alt="ONE TRUE INFOTAINMENT" />
      <span class="brand-txt">
        <strong class="brand-t1">ONE TRUE INFOTAINMENT</strong>
        <span class="brand-t2">The Voice of the Corrected States of America</span>
      </span>
    </a>
  </header>

  <main class="wrap">
    <section class="layout" id="layout">
      <!-- LEFT ADS (desktop only) -->
      <aside class="ads-col" id="adsDesktop" aria-label="Sponsored">
        <article class="ad-card"><div class="ad-tag">Sponsored</div><img loading="lazy" src="media/patriot-beer-ad.png" alt="Patriot Beer Ad"></article>
        <article class="ad-card"><div class="ad-tag">Tonight at 8</div><img loading="lazy" src="media/patriot-games-promo.png" alt="Patriot Games Promo"></article>
        <article class="ad-card"><div class="ad-tag">Recruiting</div><img loading="lazy" src="media/AngelsAd.png" alt="Angels Recruiting"></article>
      </aside>

      <!-- CENTER FEED -->
      <section class="feed" id="feed">
        <!-- Hero -->
        <article class="hero" id="hero">
          <div class="thumb media-wrap">
            <span class="pill">BREAKING</span>
            <img src="media/veteran-visibility-tour.png" alt="Grundy at the Hospital">
          </div>
          <div class="copy">
            <h1>OTI Hails Grundy’s “Veteran Visibility Tour” as Landmark in Optics</h1>
            <div class="meta">Filed 07:40 · National Front</div>
            <p>Hospital stop recast as masterclass in morale — and lighting.</p>
          </div>
        </article>

        <!-- Grid (stories + inline ads for mobile) -->
        <div class="grid" id="grid"></div>
      </section>

      <!-- RIGHT TAFAJ RAIL (decorative on desktop) -->
      <aside class="tafaj-rail" aria-hidden="true"></aside>
    </section>
  </main>

  <footer>
    <div>Produced without license from the Corrected States of America.<br>
      All contained herein are speculation and may not yet exist.<br>
      Doubt is treason; irony a pitchfork.</div>
  </footer>

  <script>
    // Canon assets & locked references
    const CANON = {
      images: {
        riverGlow: 'media/river-glow-placeholder.png', // must remain on index
        friendship: 'media/friendship-border-rebuild.png',
        domestic:'media/domestic-smiles.png',
        explains:'media/grundy-explains.png'
      },
      tafajMobile:'media/tafaj-thermometer.png'
    };

    // Story cards (sample content structure)
    const stories = [
      {kicker:'National', title:'Friendship Restored! Border Rebuild Enters Ribbon Phase', img:CANON.images.friendship},
      {kicker:'Domestic', title:'Household Smiles Index Hits All-Time Mandatory', img:CANON.images.domestic},
      {kicker:'First Citizen', title:'First Citizen Explains Stuff: Vol. 12 — The Sun, Explained', img:CANON.images.explains},
      {kicker:'Environment', title:'River Glow Forecast Improves to “Tangerine Dawn”', img:CANON.images.riverGlow}, // legacy reference on index
    ];

    // Ad tiles used for mobile interleaving (same assets as desktop ads)
    const adTiles = [
      {img:'media/patriot-beer-ad.png', alt:'Patriot Beer Ad', tag:'Sponsored'},
      {img:'media/patriot-games-promo.png', alt:'Patriot Games Promo', tag:'Tonight at 8'},
      {img:'media/AngelsAd.png', alt:'Angels Recruiting', tag:'Recruiting'}
    ];

    const grid = document.getElementById('grid');

    function storyCard(s){
      const el = document.createElement('article');
      el.className = 'card';
      el.innerHTML = `
        <div class="media-wrap"><img src="${s.img}" alt=""></div>
        <div class="body">
          <div class="kicker">${s.kicker}</div>
          <h3 class="title">${s.title}</h3>
        </div>`;
      return el;
    }

    function adTile(a){
      const el = document.createElement('article');
      el.className = 'ad-card';
      el.innerHTML = `<div class="ad-tag">${a.tag}</div><img loading="lazy" src="${a.img}" alt="${a.alt}">`;
      return el;
    }

    function tafajMobileTile(){
      const el = document.createElement('article');
      el.className = 'card';
      el.innerHTML = `
        <img src="${CANON.tafajMobile}" alt="TAFAJ Threat Meter">
        <div class="body"><div class="kicker">TAFAJ</div><h3 class="title">Threat Level: Death Imminent</h3></div>`;
      return el;
    }

    // Render strategy: desktop = stories only in grid; mobile = alternate ad tiles inline + TAFAJ tile near top
    function render(){
      grid.innerHTML='';
      const isMobile = window.matchMedia('(max-width:820px)').matches;
      if(isMobile){
        // Interleave: 1 story, then 1 ad, repeat; insert TAFAJ tile at position 1
        const merged = [];
        const maxLen = Math.max(stories.length, adTiles.length);
        for(let i=0;i<maxLen;i++){
          if(stories[i]) merged.push({type:'story', data:stories[i]});
          if(adTiles[i]) merged.push({type:'ad', data:adTiles[i]});
        }
        merged.splice(1,0,{type:'tafaj'});
        merged.forEach(item=>{
          if(item.type==='story') grid.appendChild(storyCard(item.data));
          else if(item.type==='ad') grid.appendChild(adTile(item.data));
          else grid.appendChild(tafajMobileTile());
        });
      } else {
        stories.forEach(s=>grid.appendChild(storyCard(s)));
      }
    }

    render();
    window.addEventListener('resize', ()=>{ render(); });
  </script>
</body>
</html>
