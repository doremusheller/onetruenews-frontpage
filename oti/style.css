/* ============================================================
   One True Infotainment — Canonical Style Sheet v137
   Validated: ticker.js, ads.js, grid.js, story-page, index-page
   ============================================================ */

:root {
  --indigo:#071b36;
  --amber:#b80000;
  --cream:#faf5ef;
  --shadow:rgba(0,0,0,.08);
  --ticker-h:2.6rem;
}

*{box-sizing:border-box;margin:0;padding:0}

/* ===== Base ===== */
html,body{width:100%;height:auto}
body{
  background:var(--cream);
  color:#111;
  font-family:system-ui,-apple-system,"Segoe UI",Helvetica,Arial,sans-serif;
  padding-top:var(--ticker-h);
  overflow-x:hidden;
}

/* ===== Ticker ===== */
.ticker{
  position:fixed;
  top:0;left:0;right:0;
  z-index:10000;
  background:var(--amber);
  border-bottom:2px solid rgba(0,0,0,.1);
  overflow:hidden;
  height:var(--ticker-h);
  line-height:var(--ticker-h);
  white-space:nowrap;
  font-family:"Libre Baskerville",Georgia,serif;
  font-weight:700;
  font-size:clamp(.9rem,.9vw + .6rem,1rem);
  color:#fff;
}
.ticker *{color:#fff}
.ticker > *{
  display:inline-block;
  white-space:nowrap;
  padding-left:100%;
  margin:0;
  animation:ticker-scroll 46s linear infinite;
}
@keyframes ticker-scroll{from{transform:translateX(0)}to{transform:translateX(-100%)}}
@media(prefers-reduced-motion:reduce){.ticker>*,.ticker p{animation:none;padding-left:0}}

/* ===== Banner ===== */
.site-header{background:var(--indigo)}
.banner-img{width:100%;display:block}

/* ===== Page Layout ===== */
.page{
  position:relative;
  max-width:1100px;
  margin:0 auto;
  padding:24px 16px 48px 260px;
}
.tafa-sidebar{
  position:absolute;
  top:24px;left:0;width:220px;
}
.ad-container-left{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  background:#fff;
  border:1px solid var(--shadow);
  border-color:rgba(7,27,54,.18);
  box-shadow:0 2px 6px var(--shadow);
  padding:8px;
  border-radius:8px;
}
.ad-container-left img{width:100%;object-fit:contain}

/* ===== Grid ===== */
.grid{
  display:grid;
  gap:.8rem;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
}
.tile{
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 2px 5px var(--shadow);
  transition:transform .2s ease;
}
.tile:hover{
  transform:translateY(-3px);
  box-shadow:0 6px 12px var(--shadow);
}
.tile img{
  width:100%;
  height:130px;
  object-fit:cover;
  display:block;
}

/* ===== Story Page ===== */
.story-page article{
  max-width:900px;
  margin:2rem auto;
  padding:0 1rem;
  line-height:1.7;
  font-family:"Libre Baskerville",Georgia,serif;
}
.story-hero img{
  width:100%;
  border-radius:12px;
  box-shadow:0 6px 12px var(--shadow);
}

/* Story image: compact, top-left with text wrap (desktop) */
.story-hero.wrap-left{
  float:left;
  width:min(360px,48%);
  margin:.25rem 1rem .75rem 0;
}
.story-hero.wrap-left img{width:100%;height:auto}
/* Clear floats at end of article so nav/footer don’t overlap */
.story-page article::after{content:"";display:block;clear:both}

/* Dateline & Byline */
.byline,.dateline{
  font-family:"Libre Baskerville",Georgia,serif;
  color:rgba(7,27,54,.8);
  margin:.25rem 0;
  font-size:.9rem;
}
.dateline{font-style:italic;color:rgba(7,27,54,.65)}

/* ===== Ad Row ===== */
@keyframes ad-march{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
.ad-row{
  display:flex!important;
  flex-wrap:nowrap;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  background:var(--cream);
  padding:.4rem 0;
  min-height:70px;
  animation:none;
}
.ad-row .track{
  display:flex;
  flex-wrap:nowrap;
  align-items:center;
  animation:ad-march 60s linear infinite;
}
.ad-row:hover .track{animation-play-state:paused}
.ad-tile{
  flex:0 0 auto;
  width:160px;
  margin:0 8px;
  position:relative;
  overflow:hidden;
}
.ad-tile img{
  width:100%;
  height:60px;
  object-fit:contain;
  border-radius:6px;
  box-shadow:0 2px 4px var(--shadow);
}
@media (prefers-reduced-motion: reduce){.ad-row .track{animation:none;}}

/* ===== Footer ===== */
.footer-banner{
  background:var(--cream);
  color:rgba(7,27,54,.6);
  font-family:"Libre Baskerville",Georgia,serif;
  font-size:.45rem;
  text-align:center;
  line-height:1.4;
  padding:1.5rem .5rem 1.75rem;
  border-top:1px solid var(--shadow);
  font-style:italic;
}

/* ===== Desktop Grid Density ===== */
@media(min-width:1100px){
  .grid{
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:.8rem;
  }
  .tile img{height:130px}
  .tile h2{
    font-size:clamp(.95rem,.8vw + .5rem,1rem);
    margin:.5rem .8rem .2rem;
  }
  .tile p{
    font-size:clamp(.84rem,.3vw + .6rem,.94rem);
    margin:0 .8rem .8rem;
  }
}

/* ===== Uniform Text Height ===== */
@media(min-width:1100px){
  .tile h2{
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
    text-overflow:ellipsis;
    min-height:2.5em;
  }
  .tile p{
    display:-webkit-box;
    -webkit-line-clamp:3;
    -webkit-box-orient:vertical;
    overflow:hidden;
    text-overflow:ellipsis;
    min-height:3.6em;
  }
}

/* ===== Sidebar Scope + Mobile Stack ===== */
.story-page .tafa-sidebar{display:none!important}
@media(min-width:701px){
  .index-page .page{padding:24px 16px 48px 260px}
  .index-page .tafa-sidebar{
    position:absolute;
    top:24px;left:0;width:220px;max-width:240px;z-index:1;
  }
  .index-page .tafa-sidebar img{
    display:block;
    width:100%;
    height:auto;
    max-width:100%;
    object-fit:contain;
    transform:scale(1.12);
    transform-origin:top;
  }
}
@media(max-width:700px){
  .index-page .page{padding:16px 12px 48px}
  .index-page .tafa-sidebar{
    position:static;
    width:100%;
    max-width:320px;
    margin:0 auto 1rem;
    transform:none;
  }
  .index-page .tafa-sidebar img{
    transform:none;
    width:100%;
    height:auto;
    max-height:40vh;
    object-fit:contain;
  }
  .index-page .ad-container-left{display:none}
  .index-page .grid{grid-template-columns:1fr}
}

/* ===== Story Page Mobile & Buttons ===== */
.story-page .page{padding:24px 16px 48px}
@media(max-width:700px){.story-page .page{padding:16px 12px 48px}}
@media(max-width:700px){.story-page h1{font-size:1.6rem;line-height:1.2}}
.footer-nav{text-align:center;margin:1.25rem 0}
.btn{
  display:inline-block;
  padding:.45rem .75rem;
  border-radius:10px;
  background:var(--indigo);
  color:#fff;
  font-weight:700;
  text-decoration:none;
  box-shadow:0 2px 6px var(--shadow);
  transition:transform .15s ease,background .2s ease;
}
.btn:hover{background:var(--amber);transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.footer-nav .btn + .btn{margin-left:.5rem}

/* ===== Mobile Ad-Row Containment ===== */
@media(max-width:700px){
  .ad-row{
    flex-direction:column;
    align-items:center;
    justify-content:center;
    animation:none;
    overflow-x:hidden;
    overflow-y:visible;
    gap:1rem;
    padding:1rem 0;
    min-height:unset;
  }
  .ad-row .track{animation:none;}
  .ad-tile{
    width:90vw;
    max-width:320px;
    margin:0 auto;
  }
  .ad-tile img{height:auto;}
  .story-hero.wrap-left{
    float:none;
    width:100%;
    margin:0 0 1rem 0;
  }
}

/* ===== Financial Patriotism Pill ===== */
.ad-pill{
  position:absolute;
  top:6px;left:6px;z-index:2;
  background:var(--amber);
  color:#fff;
  font-weight:700;
  font-size:.6rem;
  padding:.25rem .45rem;
  border-radius:6px;
  box-shadow:0 2px 4px var(--shadow);
  text-transform:uppercase;
  letter-spacing:.05em;
  opacity:0;
  transition:opacity .25s ease;
}
.ad-tile:hover .ad-pill,
.ad-tile:focus-within .ad-pill{opacity:1}
@media(max-width:700px){
  .ad-pill{
    font-size:.55rem;
    padding:.2rem .4rem;
    top:8px;left:8px;
  }
}

/* ===== Breaking Pill ===== */
.tile.breaking{position:relative;border:2px solid var(--amber)}
.tile.breaking .breaking-pill{
  position:absolute;
  top:8px;left:8px;z-index:2;
  background:var(--amber);
  color:#fff;
  font-weight:700;
  font-size:.7rem;
  padding:.25rem .5rem;
  border-radius:6px;
  box-shadow:0 2px 4px var(--shadow);
  text-transform:uppercase;
  letter-spacing:.05em;
}
@media(max-width:700px){
  .tile.breaking .breaking-pill{
    font-size:.6rem;
    padding:.2rem .4rem;
  }
}

/* ============================================================
   STORY PAGES — NEWS PRINT TOUCHES (scoped)
   ============================================================ */
.story-page article{
  line-height:1.75;
  letter-spacing:.005em;
  -webkit-hyphens:auto; -ms-hyphens:auto; hyphens:auto;
  hanging-punctuation:first;
  font-variant-ligatures:common-ligatures discretionary-ligatures;
  font-feature-settings:"liga","clig","kern";
  color:#1a1a1a;
}
.story-page article h1{
  letter-spacing:-.01em;
  line-height:1.15;
  margin-bottom:.35rem;
}
.story-page .dek{
  font-family:"Libre Baskerville",Georgia,serif;
  font-size:1.05rem;
  color:rgba(7,27,54,.8);
  margin:.15rem 0 .75rem;
}
.story-page .kicker{
  font-family:system-ui,-apple-system,\"Segoe UI\",Helvetica,Arial,sans-serif;
  font-weight:700;
  font-size:.8rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:rgba(7,27,54,.7);
  margin:.25rem 0 .15rem;
}
.story-page .pull{
  border-left:3px solid rgba(7,27,54,.2);
  padding:.5rem .75rem;
  font-family:\"Libre Baskerville\",Georgia,serif;
  font-size:1.05rem;
  color:#111;
  margin:1rem 0;
}
.story-page .note{
  font-style:italic;
  color:rgba(7,27,54,.8);
}
.story-page article header{
  border-top:1px solid rgba(7,27,54,.12);
  border-bottom:1px solid rgba(7,27,54,.12);
  padding:.5rem 0 .65rem;
  margin-bottom:.75rem;
}

/* ============================================================
   MOBILE — AD PARADE (horizontal, slow)
   ============================================================ */
@keyframes mobile-ad-parade{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

@media(max-width:700px){
  .ad-row{
    display:block;
    overflow:hidden;
    padding:1rem 0;
  }
  .ad-row .track{
    display:flex;
    flex-wrap:nowrap;
    gap:0;
    animation:mobile-ad-parade 120s linear infinite;
  }
  .ad-tile{
    flex:0 0 auto;
    width:72vw;
    margin:0 .5rem;
  }
  .ad-tile img{height:auto;object-fit:contain;}
}

@media (prefers-reduced-motion: reduce){
  .ad-row .track{animation:none !important;}
  .ad-tile .ad-pill{transition:none;}
}
