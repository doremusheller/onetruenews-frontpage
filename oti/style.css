/* ============================================================
   One True Infotainment — Canonical Style Sheet v159 (GAGS + fixed ticker)
   ============================================================ */

:root{
  --indigo:#071b36;
  --amber:#b80000;
  --cream:#faf5ef;
  --shadow:rgba(0,0,0,.08);
  --ticker-h:2.6rem;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:auto}
body{
  background:var(--cream);
  color:#111;
  font-family:system-ui,-apple-system,"Segoe UI",Helvetica,Arial,sans-serif;
  padding-top:var(--ticker-h);
  overflow-x:hidden;
}

/* ===== Ticker ===== */
.ticker {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 999999;
  background: var(--amber);        /* red background */
  color: #fff;                     /* white text */
  border-bottom: 2px solid rgba(0,0,0,.1);
  overflow: hidden;
  height: var(--ticker-h);
  line-height: var(--ticker-h);
  white-space: nowrap;
  font-family: "Libre Baskerville", Georgia, serif;
  font-weight: 700;
  font-size: clamp(.9rem, .9vw + .6rem, 1rem);
  pointer-events: none;            /* keeps it topmost but non-blocking */
}
.ticker > * {
  display: inline-block;
  white-space: nowrap;
  padding-left: 100%;
  margin: 0;
  animation: ticker-scroll 46s linear infinite;
  color: #fff;
  pointer-events: none;
}
@keyframes ticker-scroll {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}
@media (prefers-reduced-motion: reduce) {
  .ticker > * {
    animation: none;
    padding-left: 0;
  }
}

/* ===== Banner ===== */
.site-header{background:var(--indigo);position:relative;z-index:1;}
.banner-img{width:100%;display:block}

/* ===== Page Layout (base) ===== */
.page{
  position:relative; max-width:1100px; margin:0 auto;
  padding:24px 16px 48px;
}

/* ===== Grid ===== */
.grid{
  display:grid; gap:.8rem;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  position:relative; z-index:1;
}
.tile{
  background:#fff; border-radius:10px; overflow:hidden;
  box-shadow:0 2px 5px var(--shadow); transition:transform .2s ease;
}
.tile:hover{ transform:translateY(-3px); box-shadow:0 6px 12px var(--shadow); }
.tile img{ width:100%; height:130px; object-fit:cover; display:block; }
.tile a{ color:inherit; text-decoration:none; display:block; }

/* ===== Breaking ===== */
.index-page .grid{grid-auto-flow:dense;}
.tile.breaking{position:relative; border:2px solid var(--amber)}
.tile.breaking .breaking-pill{
  position:absolute; top:8px; left:8px; z-index:2;
  background:var(--amber); color:#fff; font-weight:700; font-size:.7rem;
  padding:.25rem .5rem; border-radius:6px; box-shadow:0 2px 4px var(--shadow); text-transform:uppercase;
}
@media(max-width:700px){ .tile.breaking .breaking-pill{font-size:.6rem; padding:.2rem .4rem;} }

/* ===== Story Page ===== */
.story-page article{
  max-width:940px; margin:2rem auto; padding:0 .75rem;
  line-height:1.7; font-family:"Libre Baskerville",Georgia,serif;
}
.story-hero img{ width:100%; border-radius:12px; box-shadow:0 6px 12px var(--shadow); }
.story-hero.wrap-left{ float:left; width:min(360px,48%); margin:.25rem 1rem .75rem 0; }
.story-hero figcaption{ font-style:italic; color:rgba(7,27,54,.75); font-size:.9rem; margin-top:.4rem; }
.byline,.dateline{ font-family:"Libre Baskerville",Georgia,serif; color:rgba(7,27,54,.8); margin:.25rem 0; font-size:.9rem; }
.dateline{ font-style:italic; color:rgba(7,27,54,.65) }

/* ===== Footer ===== */
.footer-banner{
  background:var(--cream); color:rgba(7,27,54,.6);
  font-family:"Libre Baskerville",Georgia,serif;
  font-size:.45rem; text-align:center; line-height:1.4;
  padding:1.5rem .5rem 1.75rem; border-top:1px solid var(--shadow);
  font-style:italic;
}

/* ===== Desktop niceties ===== */
@media(min-width:1100px){
  .grid{grid-template-columns:repeat(3,minmax(0,1fr)); gap:1rem;}
  .tile h2,.tile p{overflow-wrap:anywhere; hyphens:auto;}

  /* Desktop: 2-col layout (220px rail + content). Banner is outside .page. */
  .index-page .page{
    display:grid;
    grid-template-columns:220px 1fr;
    column-gap:40px;
    padding-left:16px;
  }

  /* Left rail: sticky and capped; below ticker */
  #gags-rail{
    position:sticky;
    top:var(--ticker-h);
    align-self:start;
    width:220px;
    max-height:calc(100vh - var(--ticker-h));
    display:flex; flex-direction:column; gap:10px;
    background:transparent;
    z-index:1;
  }

  /* If rail is empty, collapse back to single column (modern browsers) */
  .index-page .page:has(#gags-rail:empty){
    display:block;
  }

  /* Ensure grid sits in the right column naturally */
  #storyGrid{ align-self:start; }
}

/* ===== Mobile ===== */
@media(max-width:700px){
  .page{padding:16px 12px 48px}
  .grid{grid-template-columns:1fr}
  .story-hero.wrap-left{float:none; width:100%; margin:0 0 1rem 0;}
}

/* ===== OTI Gags — Rail content containers ===== */
#gags-rail .gag-fixed{
  position:relative;
  flex:0 0 auto;
  display:flex; flex-direction:column;
  align-items:center; justify-content:flex-start;
  border-radius:8px; background:transparent; gap:6px;
}
#gags-rail .gag-fixed .gag-tile{ width:100%; }

#gags-rail .gag-scroll{
  flex:1 1 auto;
  min-height:0;
  display:flex; flex-direction:column; gap:10px;
  overflow-y:auto; overflow-x:hidden;
  background:transparent; padding:0;
}

/* ===== Generic Gag Tile ===== */
.gag-tile{ position:relative; display:block; border-radius:8px; overflow:hidden; }
.gag-img{
  width:100%; height:auto; aspect-ratio:16/9; object-fit:cover; display:block;
  box-shadow:0 2px 4px var(--shadow);
}
.gag-pill{
  position:absolute; top:6px; left:6px; z-index:2;
  background:var(--amber); color:#fff; font-weight:700; font-size:.6rem;
  padding:.25rem .45rem; border-radius:999px; text-transform:none;
  opacity:0; transition:opacity .2s ease;
}
.gag-tile:hover .gag-pill, .gag-tile:focus-within .gag-pill{ opacity:1; }
.gag-tile:focus-visible{ outline:2px solid var(--amber); outline-offset:2px; }

/* ===== Mobile: Bottom Gags Dock ===== */
@media (max-width:700px){
  #gags-rail{ display:none; }
  #gags-dock{
    position:fixed; left:0; right:0; bottom:0;
    background:transparent; padding:.4rem .5rem; z-index:5000;
  }
  #gags-dock .gag-track{
    display:flex; flex-wrap:nowrap; gap:8px;
    overflow-x:auto; overflow-y:hidden; background:transparent;
    -webkit-overflow-scrolling:touch; scroll-snap-type:x proximity;
  }
  #gags-dock .gag-tile{ flex:0 0 auto; width:160px; scroll-snap-align:start; }
  body{ padding-bottom:84px; }
}

/* ===== Safety ===== */
#gags-rail{ pointer-events:none; }
#gags-rail[data-live="1"]{ pointer-events:auto; }

/* Hide empty gags containers (prevents blank rails/docks) */
#gags-rail:empty{ display:none; }
#gags-dock:empty{ display:none; }

/* ===== Desktop-only: Hide mobile dock ===== */
@media (min-width:701px){ #gags-dock{ display:none; } }
